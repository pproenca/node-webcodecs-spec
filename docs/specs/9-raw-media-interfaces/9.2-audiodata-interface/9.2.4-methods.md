# 9.2.4. Methods

**allocationSize(options)**
: Returns the number of bytes required to hold the samples as described by options.

When invoked, run these steps:

1.  If [`[[Detached]]`](https://html.spec.whatwg.org/multipage/structured-data.html#detached) is `true`, throw an [`InvalidStateError`](https://webidl.spec.whatwg.org/#invalidstateerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
2.  Let copyElementCount be the result of running the [Compute Copy Element Count](#compute-copy-element-count) algorithm with options.
3.  Let destFormat be the value of [`[[format]]`](#dom-audiodata-format-slot).
4.  If options.[`format`](#dom-audiodatacopytooptions-format) [exists](https://infra.spec.whatwg.org/#map-exists), assign options.[`format`](#dom-audiodatacopytooptions-format) to destFormat.
5.  Let bytesPerSample be the number of bytes per sample, as defined by the destFormat.
6.  Return the product of multiplying bytesPerSample by copyElementCount.

**copyTo(destination, options)**
: Copies the samples from the specified plane of the [`AudioData`](#audiodata) to the destination buffer.

When invoked, run these steps:

1.  If [`[[Detached]]`](https://html.spec.whatwg.org/multipage/structured-data.html#detached) is `true`, throw an [`InvalidStateError`](https://webidl.spec.whatwg.org/#invalidstateerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
2.  Let copyElementCount be the result of running the [Compute Copy Element Count](#compute-copy-element-count) algorithm with options.
3.  Let destFormat be the value of [`[[format]]`](#dom-audiodata-format-slot).
4.  If options.[`format`](#dom-audiodatacopytooptions-format) [exists](https://infra.spec.whatwg.org/#map-exists), assign options.[`format`](#dom-audiodatacopytooptions-format) to destFormat.
5.  Let bytesPerSample be the number of bytes per sample, as defined by the destFormat.
6.  If the product of multiplying bytesPerSample by copyElementCount is greater than `destination.byteLength`, throw a [`RangeError`](https://webidl.spec.whatwg.org/#exceptiondef-rangeerror).
7.  Let resource be the [media resource](#media-resource) referenced by [`[[resource reference]]`](#dom-audiodata-resource-reference-slot).
8.  Let planeFrames be the region of resource corresponding to options.[`planeIndex`](#dom-audiodatacopytooptions-planeindex).
9.  Copy elements of planeFrames into destination, starting with the [frame](#frame) positioned at options.[`frameOffset`](#dom-audiodatacopytooptions-frameoffset) and stopping after copyElementCount samples have been copied. If destFormat does not equal [`[[format]]`](#dom-audiodata-format-slot), convert elements to the destFormat [`AudioSampleFormat`](#enumdef-audiosampleformat) while making the copy.

**clone()**
: Creates a new AudioData with a reference to the same [media resource](#media-resource).

When invoked, run these steps:

1.  If [`[[Detached]]`](https://html.spec.whatwg.org/multipage/structured-data.html#detached) is `true`, throw an [`InvalidStateError`](https://webidl.spec.whatwg.org/#invalidstateerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
2.  Return the result of running the [Clone AudioData](#clone-audiodata) algorithm with [this](https://webidl.spec.whatwg.org/#this).

**close()**
: Clears all state and releases the reference to the [media resource](#media-resource). Close is final.

When invoked, run the [Close AudioData](#close-audiodata) algorithm with [this](https://webidl.spec.whatwg.org/#this).

---

[‚Üê Back to 9.2. AudioData Interface](../../9-raw-media-interfaces/9.2-audiodata-interface/TOC.md)
