# 8.1.2. Constructors

`EncodedAudioChunk(init)`

1.  If init.[`transfer`](#dom-encodedaudiochunkinit-transfer) contains more than one reference to the same [`ArrayBuffer`](https://webidl.spec.whatwg.org/#idl-ArrayBuffer), then throw a [`DataCloneError`](https://webidl.spec.whatwg.org/#datacloneerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
2.  For each transferable in init.[`transfer`](#dom-encodedaudiochunkinit-transfer):
    1.  If [`[[Detached]]`](https://html.spec.whatwg.org/multipage/structured-data.html#detached) internal slot is `true`, then throw a [`DataCloneError`](https://webidl.spec.whatwg.org/#datacloneerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).

3.  Let chunk be a new [`EncodedAudioChunk`](#encodedaudiochunk) object, initialized as follows
    1.  Assign `init.type` to [`[[type]]`](#dom-encodedaudiochunk-type-slot).
    2.  Assign `init.timestamp` to [`[[timestamp]]`](#dom-encodedaudiochunk-timestamp-slot).
    3.  If `init.duration` exists, assign it to [`[[duration]]`](#dom-encodedaudiochunk-duration-slot), or assign `null` otherwise.
    4.  Assign `init.data.byteLength` to [`[[byte length]]`](#dom-encodedaudiochunk-byte-length-slot);
    5.  If init.[`transfer`](#dom-encodedaudiochunkinit-transfer) contains an [`ArrayBuffer`](https://webidl.spec.whatwg.org/#idl-ArrayBuffer) referenced by init.[`data`](#dom-encodedaudiochunkinit-data) the User Agent _MAY_ choose to:
        1.  Let resource be a new [media resource](#media-resource) referencing sample data in init.[`data`](#dom-encodedaudiochunkinit-data).

    6.  Otherwise:
        1.  Assign a copy of init.[`data`](#dom-encodedaudiochunkinit-data) to [`[[internal data]]`](#dom-encodedaudiochunk-internal-data-slot).

4.  For each transferable in init.[`transfer`](#dom-encodedaudiochunkinit-transfer):
    1.  Perform [DetachArrayBuffer](https://tc39.es/ecma262/#sec-detacharraybuffer) on transferable

5.  Return chunk.

---

[‚Üê Back to 8.1. EncodedAudioChunk Interface](../../8-encoded-media-interfaces-chunks/8.1-encodedaudiochunk-interface/TOC.md)
