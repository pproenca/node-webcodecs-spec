# 10.3. ImageDecoderInit Interface

```webidl
typedef (AllowSharedBufferSource or ReadableStream) ImageBufferSource;
dictionary ImageDecoderInit {
  required DOMString type;
  required ImageBufferSource data;
  ColorSpaceConversion colorSpaceConversion = "default";
  [EnforceRange] unsigned long desiredWidth;
  [EnforceRange] unsigned long desiredHeight;
  boolean preferAnimation;
  sequence<ArrayBuffer> transfer = [];
};
```

To determine if an [`ImageDecoderInit`](#dictdef-imagedecoderinit) is a valid ImageDecoderInit, run these steps:

1.  If type is not a [valid image MIME type](#valid-image-mime-type), return `false`.
    
2.  If data is of type [`ReadableStream`](https://streams.spec.whatwg.org/#readablestream) and the ReadableStream is [disturbed](https://streams.spec.whatwg.org/#is-readable-stream-disturbed) or [locked](https://streams.spec.whatwg.org/#readablestream-locked), return `false`.
    
3.  If data is of type [`BufferSource`](https://webidl.spec.whatwg.org/#BufferSource):
    
    1.  If data is \[[detached](https://webidl.spec.whatwg.org/#buffersource-detached)\], return false.
        
    2.  If data [is empty](https://infra.spec.whatwg.org/#list-is-empty), return `false`.
        
4.  If [`desiredWidth`](#dom-imagedecoderinit-desiredwidth) [exists](https://infra.spec.whatwg.org/#map-exists) and [`desiredHeight`](#dom-imagedecoderinit-desiredheight) does not exist, return `false`.
    
5.  If [`desiredHeight`](#dom-imagedecoderinit-desiredheight) [exists](https://infra.spec.whatwg.org/#map-exists) and [`desiredWidth`](#dom-imagedecoderinit-desiredwidth) does not exist, return `false`.
    
6.  Return `true`.
    

A valid image MIME type is a string that is a [valid MIME type string](https://mimesniff.spec.whatwg.org/#valid-mime-type) and for which the `type`, per Section 8.3.1 of [\[RFC9110\]](#biblio-rfc9110 "HTTP Semantics"), is `image`.

**type, of type DOMString**
: String containing the MIME type of the image file to be decoded.

**data, of type ImageBufferSource**
: [`BufferSource`](https://webidl.spec.whatwg.org/#BufferSource) or [`ReadableStream`](https://streams.spec.whatwg.org/#readablestream) of bytes representing an encoded image file as described by [`type`](#dom-imagedecoderinit-type).

**colorSpaceConversion, of type ColorSpaceConversion, defaulting to "default"**
: Controls whether decoded outputs' color space is converted or ignored, as defined by [`colorSpaceConversion`](https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-imagebitmapoptions-colorspaceconversion) in [`ImageBitmapOptions`](https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmapoptions).

**desiredWidth, of type unsigned long**
: Indicates a desired width for decoded outputs. Implementation is best effort; decoding to a desired width _MAY_ not be supported by all formats/ decoders.

**desiredHeight, of type unsigned long**
: Indicates a desired height for decoded outputs. Implementation is best effort; decoding to a desired height _MAY_ not be supported by all formats/decoders.

**preferAnimation, of type boolean**
: For images with multiple tracks, this indicates whether the initial track selection _SHOULD_ prefer an animated track.

NOTE: See the [Get Default Selected Track Index](#imagedecoder-get-default-selected-track-index) algorithm.

---

[‚Üê Back to 10. Image Decoding](../10-image-decoding/TOC.md)
