# 10.2.4. Methods

**decode(options)**
: Enqueues a control message to decode the frame according to options.

When invoked, run these steps:

1.  If [`[[closed]]`](#dom-imagedecoder-closed-slot) is `true`, return a [`Promise`](https://webidl.spec.whatwg.org/#idl-promise) rejected with an [`InvalidStateError`](https://webidl.spec.whatwg.org/#invalidstateerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
2.  If [`[[ImageTrackList]]`](#dom-imagedecoder-imagetracklist-slot)’s [`[[selected index]]`](#dom-imagetracklist-selected-index-slot) is '-1', return a [`Promise`](https://webidl.spec.whatwg.org/#idl-promise) rejected with an [`InvalidStateError`](https://webidl.spec.whatwg.org/#invalidstateerror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).
3.  If options is `undefined`, assign a new [`ImageDecodeOptions`](#dictdef-imagedecodeoptions) to options.
4.  Let promise be a new [`Promise`](https://webidl.spec.whatwg.org/#idl-promise).
5.  Append promise to [`[[pending decode promises]]`](#dom-imagedecoder-pending-decode-promises-slot).
6.  [Queue a control message](#enqueues-a-control-message) to decode the image with options, and promise.
7.  [Process the control message queue](#process-the-control-message-queue).
8.  Return promise.

[Running a control message](#running-a-control-message) to decode the image means running these steps:

1.  Enqueue the following steps to the [`[[codec work queue]]`](#dom-imagedecoder-codec-work-queue-slot):
    1.  Wait for [`[[tracks established]]`](#dom-imagedecoder-tracks-established-slot) to become `true`.
    2.  If options.[`completeFramesOnly`](#dom-imagedecodeoptions-completeframesonly) is `false` and the image is a [Progressive Image](#progressive-image) for which the User Agent supports progressive decoding, run the [Decode Progressive Frame](#imagedecoder-decode-progressive-frame) algorithm with options.[`frameIndex`](#dom-imagedecodeoptions-frameindex) and promise.
    3.  Otherwise, run the [Decode Complete Frame](#imagedecoder-decode-complete-frame) algorithm with options.[`frameIndex`](#dom-imagedecodeoptions-frameindex) and promise.

**reset()**
: Immediately aborts all pending work.

When invoked, run the [Reset ImageDecoder](#imagedecoder-reset-imagedecoder) algorithm with an [`AbortError`](https://webidl.spec.whatwg.org/#aborterror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).

**close()**
: Immediately aborts all pending work and releases system resources. Close is final.

When invoked, run the [Close ImageDecoder](#imagedecoder-close-imagedecoder) algorithm with an [`AbortError`](https://webidl.spec.whatwg.org/#aborterror) [`DOMException`](https://webidl.spec.whatwg.org/#idl-DOMException).

**isTypeSupported(type)**
: Returns a promise indicating whether the provided config is supported by the User Agent.

When invoked, run these steps:

1.  If type is not a [valid image MIME type](#valid-image-mime-type), return a [`Promise`](https://webidl.spec.whatwg.org/#idl-promise) rejected with [`TypeError`](https://webidl.spec.whatwg.org/#exceptiondef-typeerror).
2.  Let p be a new [`Promise`](https://webidl.spec.whatwg.org/#idl-promise).
3.  In parallel, resolve p with the result of running the [Check Type Support](#imagedecoder-check-type-support) algorithm with type.
4.  Return p.

---

[← Back to 10.2. ImageDecoder Interface](../../10-image-decoding/10.2-imagedecoder-interface/TOC.md)
