{
  "interface": "AudioEncoder",
  "type": "interface",
  "source": {
    "idl": "spec/context/_webcodecs.idl#L52-L66",
    "spec": "spec/context/AudioEncoder.md"
  },
  "extendedAttributes": [
    "Exposed=[{\"value\":\"Window\"},{\"value\":\"DedicatedWorker\"}]",
    "SecureContext"
  ],
  "files": {
    "cppHeader": "src/AudioEncoder.h",
    "cppImpl": "src/AudioEncoder.cpp",
    "tsWrapper": "lib/AudioEncoder.ts",
    "tests": "test/audioencoder.test.ts"
  },
  "features": [
    {
      "id": "AudioEncoder.constructor",
      "category": "constructor",
      "name": "constructor(init: AudioEncoderInit)",
      "description": "Create AudioEncoder instance",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 1
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 26,
          "endLine": 36
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 42,
          "endLine": 45
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#constructor",
      "algorithmSteps": [
        "Initialize internal slots."
      ],
      "steps": [
        {
          "id": "AudioEncoder.constructor.cpp-impl",
          "description": "C++: Implement constructor with parameter validation",
          "passes": false
        },
        {
          "id": "AudioEncoder.constructor.cpp-init",
          "description": "C++: Initialize internal state slots",
          "passes": false
        },
        {
          "id": "AudioEncoder.constructor.ts-binding",
          "description": "TS: Wire TypeScript wrapper to native constructor",
          "passes": false
        },
        {
          "id": "AudioEncoder.constructor.test",
          "description": "Test: Verify constructor creates valid instance",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.state",
      "category": "attribute",
      "name": "state",
      "description": "Readonly attribute",
      "returnType": "CodecState",
      "readonly": true,
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 28
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 49,
          "endLine": 52
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 47,
          "endLine": 49
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#attributes",
      "algorithmSteps": [],
      "steps": [
        {
          "id": "AudioEncoder.state.cpp-getter",
          "description": "C++: Implement GetState() returning CodecState",
          "passes": false
        },
        {
          "id": "AudioEncoder.state.ts-binding",
          "description": "TS: Wire getter to native",
          "passes": false
        },
        {
          "id": "AudioEncoder.state.test",
          "description": "Test: Verify initial value and behavior",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.encodeQueueSize",
      "category": "attribute",
      "name": "encodeQueueSize",
      "description": "Readonly attribute",
      "returnType": "unsigned long",
      "readonly": true,
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 29
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 54,
          "endLine": 57
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 50,
          "endLine": 52
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#attributes",
      "algorithmSteps": [],
      "steps": [
        {
          "id": "AudioEncoder.encodeQueueSize.cpp-getter",
          "description": "C++: Implement GetEncodeQueueSize() returning unsigned long",
          "passes": false
        },
        {
          "id": "AudioEncoder.encodeQueueSize.ts-binding",
          "description": "TS: Wire getter to native",
          "passes": false
        },
        {
          "id": "AudioEncoder.encodeQueueSize.test",
          "description": "Test: Verify initial value and behavior",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.ondequeue",
      "category": "attribute",
      "name": "ondequeue",
      "description": "Read/write attribute",
      "returnType": "EventHandler",
      "readonly": false,
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 30
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 59,
          "endLine": 62
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 53,
          "endLine": 55
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#attributes",
      "algorithmSteps": [],
      "steps": [
        {
          "id": "AudioEncoder.ondequeue.cpp-getter",
          "description": "C++: Implement GetOndequeue() returning EventHandler",
          "passes": false
        },
        {
          "id": "AudioEncoder.ondequeue.cpp-setter",
          "description": "C++: Implement SetOndequeue()",
          "passes": false
        },
        {
          "id": "AudioEncoder.ondequeue.ts-binding",
          "description": "TS: Wire getter and setter to native",
          "passes": false
        },
        {
          "id": "AudioEncoder.ondequeue.test",
          "description": "Test: Verify initial value and behavior",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.configure",
      "category": "method",
      "name": "configure(config: AudioEncoderConfig)",
      "description": "[Enqueues a control message](#enqueues-a-control-message) to configure the audio encoder for encoding audio data as described by config.",
      "returnType": "undefined",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 34
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 71,
          "endLine": 81
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 61,
          "endLine": 63
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#configure",
      "algorithmSteps": [
        "[Enqueues a control message](#enqueues-a-control-message) to configure the audio encoder for encoding audio data as described by config.",
        "NOTE: This method will trigger a `[NotSupportedError](https://webidl.spec.whatwg.org/#notsupportederror)` if the User Agent does not support config. Authors are encouraged to first check support by calling `[isConfigSupported()](#dom-audioencoder-isconfigsupported)` with config. User Agents don’t have to support any particular codec type or configuration.",
        "When invoked, run these steps:",
        "If config is not a [valid AudioEncoderConfig](#valid-audioencoderconfig), throw a `[TypeError](https://webidl.spec.whatwg.org/#exceptiondef-typeerror)`.",
        "If `[state](#dom-audioencoder-state-slot)` is \"closed\", throw an `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)`.",
        "Set `[state](#dom-audioencoder-state-slot)` to \"configured\".",
        "[Queue a control message](#enqueues-a-control-message) to configure the encoder using config.",
        "[Process the control message queue](#process-the-control-message-queue).",
        "[Running a control message](#running-a-control-message) to configure the encoder means performing these steps:",
        "Assign `true` to `[message queue blocked](#dom-audioencoder-message-queue-blocked-slot)`.",
        "Enqueue the following steps to `[codec work queue](#dom-audioencoder-codec-work-queue-slot)`:",
        "Let supported be the result of running the [Check Configuration Support](#check-configuration-support) algorithm with config.",
        "If supported is `false`, [queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to run the [Close AudioEncoder](#close-audioencoder) algorithm with `[NotSupportedError](https://webidl.spec.whatwg.org/#notsupportederror)` and abort these steps.",
        "If needed, assign `[codec implementation](#dom-audioencoder-codec-implementation-slot)` with an implementation supporting config.",
        "Configure `[codec implementation](#dom-audioencoder-codec-implementation-slot)` with config.",
        "[queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to run the following steps:",
        "Assign `false` to `[message queue blocked](#dom-audioencoder-message-queue-blocked-slot)`.",
        "[Queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to [Process the control message queue](#process-the-control-message-queue).",
        "Return \"processed\"."
      ],
      "steps": [
        {
          "id": "AudioEncoder.configure.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.configure.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.configure.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.configure.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.configure.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.encode",
      "category": "method",
      "name": "encode(data: AudioData)",
      "description": "[Enqueues a control message](#enqueues-a-control-message) to encode the given data.",
      "returnType": "undefined",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 35
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 83,
          "endLine": 93
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 64,
          "endLine": 66
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#encode",
      "algorithmSteps": [
        "[Enqueues a control message](#enqueues-a-control-message) to encode the given data.",
        "When invoked, run these steps:",
        "If the value of data’s `[Detached](https://html.spec.whatwg.org/multipage/structured-data.html#detached)` internal slot is `true`, throw a `[TypeError](https://webidl.spec.whatwg.org/#exceptiondef-typeerror)`.",
        "If `[state](#dom-audioencoder-state-slot)` is not \"configured\", throw an `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)`.",
        "Let dataClone hold the result of running the [Clone AudioData](#clone-audiodata) algorithm with data.",
        "Increment `[encodeQueueSize](#dom-audioencoder-encodequeuesize-slot)`.",
        "[Queue a control message](#enqueues-a-control-message) to encode dataClone.",
        "[Process the control message queue](#process-the-control-message-queue).",
        "[Running a control message](#running-a-control-message) to encode the data means performing these steps:",
        "If `[codec saturated](#dom-audioencoder-codec-saturated-slot)` equals `true`, return \"not processed\".",
        "If encoding data will cause the `[codec implementation](#dom-audioencoder-codec-implementation-slot)` to become [saturated](#saturated), assign `true` to `[codec saturated](#dom-audioencoder-codec-saturated-slot)`.",
        "Decrement `[encodeQueueSize](#dom-audioencoder-encodequeuesize-slot)` and run the [Schedule Dequeue Event](#audioencoder-schedule-dequeue-event) algorithm.",
        "Enqueue the following steps to the `[codec work queue](#dom-audioencoder-codec-work-queue-slot)`:",
        "Attempt to use `[codec implementation](#dom-audioencoder-codec-implementation-slot)` to encode the [media resource](#media-resource) described by dataClone.",
        "If encoding results in an error, [queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to run the [Close AudioEncoder](#close-audioencoder) algorithm with `[EncodingError](https://webidl.spec.whatwg.org/#encodingerror)` and return.",
        "If `[codec saturated](#dom-audioencoder-codec-saturated-slot)` equals `true` and `[codec implementation](#dom-audioencoder-codec-implementation-slot)` is no longer [saturated](#saturated), [queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to perform the following steps:",
        "Assign `false` to `[codec saturated](#dom-audioencoder-codec-saturated-slot)`.",
        "[Process the control message queue](#process-the-control-message-queue).",
        "Let encoded outputs be a [list](https://infra.spec.whatwg.org/#list) of encoded audio data outputs emitted by `[codec implementation](#dom-audioencoder-codec-implementation-slot)`.",
        "If encoded outputs is not empty, [queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to run the [Output EncodedAudioChunks](#output-encodedaudiochunks) algorithm with encoded outputs.",
        "Return \"processed\"."
      ],
      "steps": [
        {
          "id": "AudioEncoder.encode.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.encode.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.encode.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.encode.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.encode.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.flush",
      "category": "method",
      "name": "flush()",
      "description": "Completes all [control messages](#control-message) in the [control message queue](#control-message-queue) and emits all outputs.",
      "returnType": "undefined",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 36
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 95,
          "endLine": 105
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 67,
          "endLine": 69
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#flush",
      "algorithmSteps": [
        "Completes all [control messages](#control-message) in the [control message queue](#control-message-queue) and emits all outputs.",
        "When invoked, run these steps:",
        "If `[state](#dom-audioencoder-state-slot)` is not \"configured\", return [a promise rejected with](https://webidl.spec.whatwg.org/#a-promise-rejected-with) `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`.",
        "Let promise be a new Promise.",
        "Append promise to `[pending flush promises](#dom-audioencoder-pending-flush-promises-slot)`.",
        "[Queue a control message](#enqueues-a-control-message) to flush the codec with promise.",
        "[Process the control message queue](#process-the-control-message-queue).",
        "Return promise.",
        "[Running a control message](#running-a-control-message) to flush the codec means performing these steps with promise.",
        "Enqueue the following steps to the `[codec work queue](#dom-audioencoder-codec-work-queue-slot)`:",
        "Signal `[codec implementation](#dom-audioencoder-codec-implementation-slot)` to emit all [internal pending outputs](#internal-pending-output).",
        "Let encoded outputs be a [list](https://infra.spec.whatwg.org/#list) of encoded audio data outputs emitted by `[codec implementation](#dom-audioencoder-codec-implementation-slot)`.",
        "[Queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to perform these steps:",
        "If encoded outputs is not empty, run the [Output EncodedAudioChunks](#output-encodedaudiochunks) algorithm with encoded outputs.",
        "Remove promise from `[pending flush promises](#dom-audioencoder-pending-flush-promises-slot)`.",
        "Resolve promise.",
        "Return \"processed\"."
      ],
      "steps": [
        {
          "id": "AudioEncoder.flush.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.flush.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.flush.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.flush.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.flush.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.reset",
      "category": "method",
      "name": "reset()",
      "description": "Immediately resets all state including configuration, [control messages](#control-message) in the [control message queue](#control-message-queue), and all pending callbacks.",
      "returnType": "undefined",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 37
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 107,
          "endLine": 117
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 70,
          "endLine": 72
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#reset",
      "algorithmSteps": [
        "Immediately resets all state including configuration, [control messages](#control-message) in the [control message queue](#control-message-queue), and all pending callbacks.",
        "When invoked, run the [Reset AudioEncoder](#reset-audioencoder) algorithm with an `[AbortError](https://webidl.spec.whatwg.org/#aborterror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`."
      ],
      "steps": [
        {
          "id": "AudioEncoder.reset.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.reset.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.reset.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.reset.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.reset.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.close",
      "category": "method",
      "name": "close()",
      "description": "Immediately aborts all pending work and releases [system resources](#system-resources). Close is final.",
      "returnType": "undefined",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 38
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 119,
          "endLine": 129
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 73,
          "endLine": 75
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#close",
      "algorithmSteps": [
        "Immediately aborts all pending work and releases [system resources](#system-resources). Close is final.",
        "When invoked, run the [Close AudioEncoder](#close-audioencoder) algorithm with an `[AbortError](https://webidl.spec.whatwg.org/#aborterror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`."
      ],
      "steps": [
        {
          "id": "AudioEncoder.close.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.close.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.close.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.close.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.close.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    },
    {
      "id": "AudioEncoder.isConfigSupported",
      "category": "static-method",
      "name": "isConfigSupported(config: AudioEncoderConfig)",
      "description": "Returns a promise indicating whether the provided config is supported by the User Agent.",
      "returnType": "AudioEncoderSupport",
      "codeLinks": {
        "declaration": {
          "file": "src/AudioEncoder.h",
          "line": 39
        },
        "implementation": {
          "file": "src/AudioEncoder.cpp",
          "line": 131,
          "endLine": 141
        },
        "tsBinding": {
          "file": "lib/AudioEncoder.ts",
          "line": 77,
          "endLine": 80
        }
      },
      "algorithmRef": "spec/context/AudioEncoder.md#isconfigsupported",
      "algorithmSteps": [
        "Returns a promise indicating whether the provided config is supported by the User Agent.",
        "NOTE: The returned `[AudioEncoderSupport](#dictdef-audioencodersupport)` `[config](#dom-audioencodersupport-config)` will contain only the dictionary members that User Agent recognized. Unrecognized dictionary members will be ignored. Authors can detect unrecognized dictionary members by comparing `[config](#dom-audioencodersupport-config)` to their provided config.",
        "When invoked, run these steps:",
        "If config is not a [valid AudioEncoderConfig](#valid-audioencoderconfig), return [a promise rejected with](https://webidl.spec.whatwg.org/#a-promise-rejected-with) `[TypeError](https://webidl.spec.whatwg.org/#exceptiondef-typeerror)`.",
        "Let p be a new Promise.",
        "Let checkSupportQueue be the result of starting a new [parallel queue](https://html.spec.whatwg.org/multipage/infrastructure.html#parallel-queue).",
        "Enqueue the following steps to checkSupportQueue:",
        "Let supported be the result of running the [Check Configuration Support](#check-configuration-support) algorithm with config.",
        "[Queue a task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task) to run the following steps:",
        "Let encoderSupport be a newly constructed `[AudioEncoderSupport](#dictdef-audioencodersupport)`, initialized as follows:",
        "Set `[config](#dom-audioencodersupport-config)` to the result of running the [Clone Configuration](#clone-configuration) algorithm with config.",
        "Set `[supported](#dom-audioencodersupport-supported)` to supported.",
        "Resolve p with encoderSupport.",
        "Return p."
      ],
      "steps": [
        {
          "id": "AudioEncoder.isConfigSupported.cpp-impl",
          "description": "C++: Implement method logic per W3C spec algorithm",
          "passes": false
        },
        {
          "id": "AudioEncoder.isConfigSupported.cpp-errors",
          "description": "C++: Handle error cases with proper DOMException types",
          "passes": false
        },
        {
          "id": "AudioEncoder.isConfigSupported.ts-binding",
          "description": "TS: Wire method to native implementation",
          "passes": false
        },
        {
          "id": "AudioEncoder.isConfigSupported.test-happy",
          "description": "Test: Write test case for happy path",
          "passes": false
        },
        {
          "id": "AudioEncoder.isConfigSupported.test-errors",
          "description": "Test: Write test case for error conditions",
          "passes": false
        }
      ],
      "passes": false
    }
  ]
}