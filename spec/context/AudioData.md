# AudioData Specification

> **Source:** W3C WebCodecs (Auto-generated by scaffold-project.ts)

## Table of Contents

- [Description](#description)
- [Attributes](#attributes)
- [Methods](#methods)
  - [constructor](#constructor)
  - [allocationSize](#allocationsize)
  - [copyTo](#copyto)
  - [clone](#clone)
  - [close](#close)


## Description

AudioData interface from the W3C WebCodecs specification.

## Attributes

- **format** (`AudioSampleFormat*`) [ReadOnly]
- **sampleRate** (`float`) [ReadOnly]
- **numberOfFrames** (`uint32_t`) [ReadOnly]
- **numberOfChannels** (`uint32_t`) [ReadOnly]
- **duration** (`uint64_t`) [ReadOnly]
- **timestamp** (`int64_t`) [ReadOnly]

## Methods


### constructor

**Signature:** `constructor(AudioDataInit* init)`

**Algorithm:**

1. Initialize internal slots.


### allocationSize

**Signature:** `uint32_t allocationSize(AudioDataCopyToOptions* options)`

**Algorithm:**

1. Returns the number of bytes required to hold the samples as described by options.
2. When invoked, run these steps:
1. If `[Detached](https://html.spec.whatwg.org/multipage/structured-data.html#detached)` is `true`, throw an `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`.
2. Let copyElementCount be the result of running the [Compute Copy Element Count](#compute-copy-element-count) algorithm with options.
3. Let destFormat be the value of `[format](#dom-audiodata-format-slot)`.
4. If options.`[format](#dom-audiodatacopytooptions-format)` [exists](https://infra.spec.whatwg.org/#map-exists), assign options.`[format](#dom-audiodatacopytooptions-format)` to destFormat.
5. Let bytesPerSample be the number of bytes per sample, as defined by the destFormat.
6. Return the product of multiplying bytesPerSample by copyElementCount.


### copyTo

**Signature:** `void copyTo(AllowSharedBufferSource* destination, AudioDataCopyToOptions* options)`

**Algorithm:**

1. Copies the samples from the specified plane of the `[AudioData](#audiodata)` to the destination buffer.
2. When invoked, run these steps:
1. If `[Detached](https://html.spec.whatwg.org/multipage/structured-data.html#detached)` is `true`, throw an `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`.
2. Let copyElementCount be the result of running the [Compute Copy Element Count](#compute-copy-element-count) algorithm with options.
3. Let destFormat be the value of `[format](#dom-audiodata-format-slot)`.
4. If options.`[format](#dom-audiodatacopytooptions-format)` [exists](https://infra.spec.whatwg.org/#map-exists), assign options.`[format](#dom-audiodatacopytooptions-format)` to destFormat.
5. Let bytesPerSample be the number of bytes per sample, as defined by the destFormat.
6. If the product of multiplying bytesPerSample by copyElementCount is greater than `destination.byteLength`, throw a `[RangeError](https://webidl.spec.whatwg.org/#exceptiondef-rangeerror)`.
7. Let resource be the [media resource](#media-resource) referenced by `[resource reference](#dom-audiodata-resource-reference-slot)`.
8. Let planeFrames be the region of resource corresponding to options.`[planeIndex](#dom-audiodatacopytooptions-planeindex)`.
9. Copy elements of planeFrames into destination, starting with the [frame](#frame) positioned at options.`[frameOffset](#dom-audiodatacopytooptions-frameoffset)` and stopping after copyElementCount samples have been copied. If destFormat does not equal `[format](#dom-audiodata-format-slot)`, convert elements to the destFormat `[AudioSampleFormat](#enumdef-audiosampleformat)` while making the copy.


### clone

**Signature:** `AudioData* clone()`

**Algorithm:**

1. Creates a new AudioData with a reference to the same [media resource](#media-resource).
2. When invoked, run these steps:
1. If `[Detached](https://html.spec.whatwg.org/multipage/structured-data.html#detached)` is `true`, throw an `[InvalidStateError](https://webidl.spec.whatwg.org/#invalidstateerror)` `[DOMException](https://webidl.spec.whatwg.org/#idl-DOMException)`.
2. Return the result of running the [Clone AudioData](#clone-audiodata) algorithm with [this](https://webidl.spec.whatwg.org/#this).


### close

**Signature:** `void close()`

**Algorithm:**

1. Clears all state and releases the reference to the [media resource](#media-resource). Close is final.
2. When invoked, run the [Close AudioData](#close-audiodata) algorithm with [this](https://webidl.spec.whatwg.org/#this).

